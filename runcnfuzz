#!/bin/sh
cnf=/tmp/runcnfuzz-$$
log=runcnfuzz-$$.log
rm -f $log
trap "rm -f $cnf" 2
i=0
while true
do
  echo -n "$i\r"
  i=`expr $i + 1`
  rm -f $cnf
  ./cnfuzz > $cnf
  $1 $cnf 1>/dev/null 2>/dev/null
  case $? in
    10|20) continue;;
  esac
  seed=`head -1 $cnf|awk '{print $NF}'`
  echo $seed
  echo seed >> $log
done
